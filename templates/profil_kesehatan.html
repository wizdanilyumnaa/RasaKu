<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Profil Kesehatan - RasaKu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #fdfbf7;
            --surface: #ffffff;
            --text: #1a202c;
            --text-light: #64748b;
            --primary: #ff6b35;
            --primary-dark: #e85a2b;
            --accent: #ffa726;
            --accent-light: #ffd54f;
            --success: #10b981;
            --danger: #ef4444;
            --health: #06b6d4;
            --health-light: #22d3ee;
            --radius: 20px;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
            --shadow-md: 0 8px 24px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.03) 0%, rgba(34, 211, 238, 0.03) 100%);
            z-index: -1;
        }

        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 48px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            font-size: 32px;
            background: linear-gradient(135deg, #ff6b35 0%, #ffa726 50%, #ffd54f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .nav-link {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 16px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            background: rgba(255, 107, 53, 0.1);
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 48px auto;
            padding: 0 32px 80px;
        }

        /* Header */
        .page-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .page-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--health), var(--health-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 40px;
            box-shadow: 0 8px 32px rgba(6, 182, 212, 0.3);
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--health), var(--health-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .page-subtitle {
            color: var(--text-light);
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Flash Messages */
        .flash-container { margin-bottom: 24px; }

        .flash {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .flash-success { background: rgba(16, 185, 129, 0.1); color: #059669; border: 1px solid rgba(16, 185, 129, 0.2); }
        .flash-danger { background: rgba(239, 68, 68, 0.1); color: #dc2626; border: 1px solid rgba(239, 68, 68, 0.2); }
        .flash-info { background: rgba(59, 130, 246, 0.1); color: #2563eb; border: 1px solid rgba(59, 130, 246, 0.2); }
        .flash-warning { background: rgba(245, 158, 11, 0.1); color: #d97706; border: 1px solid rgba(245, 158, 11, 0.2); }

        /* Form Sections */
        .form-section {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(6, 182, 212, 0.1);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid rgba(6, 182, 212, 0.15);
        }

        .section-icon { font-size: 28px; }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--text);
        }

        .section-description {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* Form Elements */
        .form-group { margin-bottom: 20px; }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }

        .form-select, .form-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid rgba(6, 182, 212, 0.15);
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
            appearance: none;
        }

        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: var(--health);
            box-shadow: 0 0 0 4px rgba(6, 182, 212, 0.1);
        }

        /* Checkbox Grid */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: rgba(6, 182, 212, 0.03);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: rgba(6, 182, 212, 0.08);
            border-color: rgba(6, 182, 212, 0.2);
        }

        .checkbox-item.selected {
            background: rgba(6, 182, 212, 0.1);
            border-color: var(--health);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--health);
            cursor: pointer;
        }

        .checkbox-label {
            font-weight: 500;
            color: var(--text);
            cursor: pointer;
        }

        .checkbox-desc {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 2px;
        }

        /* Radio Options */
        .radio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(6, 182, 212, 0.03);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            background: rgba(6, 182, 212, 0.08);
        }

        .radio-item.selected {
            background: rgba(6, 182, 212, 0.1);
            border-color: var(--health);
        }

        .radio-item input[type="radio"] {
            width: 20px;
            height: 20px;
            accent-color: var(--health);
            cursor: pointer;
        }

        /* Toggle Switches */
        .toggle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .toggle-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: rgba(6, 182, 212, 0.03);
            border: 2px solid transparent;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .toggle-item.active {
            background: rgba(6, 182, 212, 0.1);
            border-color: var(--health);
        }

        .toggle-label { font-weight: 500; }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 26px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background: linear-gradient(135deg, var(--health), var(--health-light));
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 32px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--health), var(--health-light));
            color: white;
            box-shadow: 0 4px 16px rgba(6, 182, 212, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(6, 182, 212, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: var(--text);
            border: 2px solid rgba(6, 182, 212, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(6, 182, 212, 0.1);
            border-color: var(--health);
        }

        /* Info Box */
        .info-box {
            background: rgba(6, 182, 212, 0.08);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-box-icon { font-size: 24px; }

        .info-box-text {
            font-size: 14px;
            color: var(--text);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                padding: 16px 24px;
                flex-direction: column;
                gap: 16px;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }

            .container {
                padding: 0 20px 60px;
                margin: 24px auto;
            }

            .page-title { font-size: 28px; }

            .checkbox-grid, .radio-grid, .toggle-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="{{ url_for('home') }}" class="brand">RasaKu</a>
        <div class="nav-menu">
            <a href="{{ url_for('home') }}" class="nav-link">Beranda</a>
            <a href="{{ url_for('favorit') }}" class="nav-link">Favorit</a>
            <a href="{{ url_for('rekomendasi_personal') }}" class="nav-link">Rekomendasi</a>
            <a href="{{ url_for('rekomendasi_cuaca') }}" class="nav-link">Cuaca</a>
            <a href="{{ url_for('rekomendasi_kesehatan') }}" class="nav-link active">Kesehatan</a>
            <a href="{{ url_for('profile') }}" class="nav-link">Profil</a>
            <a href="{{ url_for('logout') }}" class="nav-link">Logout</a>
        </div>
    </nav>

    <div class="container">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-container">
                    {% for category, message in messages %}
                        <div class="flash flash-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Header -->
        <div class="page-header">
            <div class="page-icon">&#129657;</div>
            <h1 class="page-title">Profil Kesehatan</h1>
            <p class="page-subtitle">Isi profil kesehatan Anda untuk mendapatkan rekomendasi resep yang sesuai dengan kondisi tubuh dan kebutuhan nutrisi Anda.</p>
        </div>

        <!-- Info Box -->
        <div class="info-box">
            <span class="info-box-icon">&#128161;</span>
            <div class="info-box-text">
                <strong>Privasi Terjaga:</strong> Data kesehatan Anda hanya digunakan untuk memberikan rekomendasi resep yang lebih personal dan tidak dibagikan kepada pihak ketiga.
            </div>
        </div>

        <form action="{{ url_for('profil_kesehatan') }}" method="POST">
            <!-- Tujuan Diet -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#127919;</span>
                    <h2 class="section-title">Tujuan Diet</h2>
                </div>
                <p class="section-description">Pilih tujuan utama Anda dalam mengatur pola makan.</p>
                
                <div class="radio-grid">
                    <label class="radio-item {% if health_profile and health_profile.diet_goal == 'menurunkan_berat' %}selected{% endif %}">
                        <input type="radio" name="diet_goal" value="menurunkan_berat" {% if health_profile and health_profile.diet_goal == 'menurunkan_berat' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Menurunkan Berat</div>
                            <div class="checkbox-desc">Diet rendah kalori</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_goal == 'menaikkan_berat' %}selected{% endif %}">
                        <input type="radio" name="diet_goal" value="menaikkan_berat" {% if health_profile and health_profile.diet_goal == 'menaikkan_berat' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Menaikkan Berat</div>
                            <div class="checkbox-desc">Diet tinggi kalori</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_goal == 'menjaga_berat' %}selected{% endif %}">
                        <input type="radio" name="diet_goal" value="menjaga_berat" {% if health_profile and health_profile.diet_goal == 'menjaga_berat' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Menjaga Berat</div>
                            <div class="checkbox-desc">Diet seimbang</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_goal == 'sehat_umum' %}selected{% endif %}">
                        <input type="radio" name="diet_goal" value="sehat_umum" {% if health_profile and health_profile.diet_goal == 'sehat_umum' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Sehat Umum</div>
                            <div class="checkbox-desc">Pola makan sehat</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Tingkat Aktivitas -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#127939;</span>
                    <h2 class="section-title">Tingkat Aktivitas</h2>
                </div>
                <p class="section-description">Seberapa aktif Anda dalam kegiatan fisik sehari-hari?</p>
                
                <div class="radio-grid">
                    <label class="radio-item {% if health_profile and health_profile.activity_level == 'rendah' %}selected{% endif %}">
                        <input type="radio" name="activity_level" value="rendah" {% if health_profile and health_profile.activity_level == 'rendah' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Rendah</div>
                            <div class="checkbox-desc">Jarang olahraga</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.activity_level == 'sedang' %}selected{% endif %}">
                        <input type="radio" name="activity_level" value="sedang" {% if health_profile and health_profile.activity_level == 'sedang' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Sedang</div>
                            <div class="checkbox-desc">1-3x per minggu</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.activity_level == 'tinggi' %}selected{% endif %}">
                        <input type="radio" name="activity_level" value="tinggi" {% if health_profile and health_profile.activity_level == 'tinggi' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Tinggi</div>
                            <div class="checkbox-desc">4-5x per minggu</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.activity_level == 'sangat_tinggi' %}selected{% endif %}">
                        <input type="radio" name="activity_level" value="sangat_tinggi" {% if health_profile and health_profile.activity_level == 'sangat_tinggi' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Sangat Tinggi</div>
                            <div class="checkbox-desc">Setiap hari</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Preferensi Diet -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#127813;</span>
                    <h2 class="section-title">Preferensi Diet</h2>
                </div>
                <p class="section-description">Pilih jenis diet yang Anda ikuti.</p>
                
                <div class="radio-grid">
                    <label class="radio-item {% if not health_profile or health_profile.diet_preference == 'normal' %}selected{% endif %}">
                        <input type="radio" name="diet_preference" value="normal" {% if not health_profile or health_profile.diet_preference == 'normal' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Normal</div>
                            <div class="checkbox-desc">Semua jenis makanan</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_preference == 'vegetarian' %}selected{% endif %}">
                        <input type="radio" name="diet_preference" value="vegetarian" {% if health_profile and health_profile.diet_preference == 'vegetarian' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Vegetarian</div>
                            <div class="checkbox-desc">Tanpa daging</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_preference == 'vegan' %}selected{% endif %}">
                        <input type="radio" name="diet_preference" value="vegan" {% if health_profile and health_profile.diet_preference == 'vegan' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Vegan</div>
                            <div class="checkbox-desc">Tanpa produk hewani</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_preference == 'pescatarian' %}selected{% endif %}">
                        <input type="radio" name="diet_preference" value="pescatarian" {% if health_profile and health_profile.diet_preference == 'pescatarian' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Pescatarian</div>
                            <div class="checkbox-desc">Ikan & sayuran</div>
                        </div>
                    </label>
                    <label class="radio-item {% if health_profile and health_profile.diet_preference == 'halal' %}selected{% endif %}">
                        <input type="radio" name="diet_preference" value="halal" {% if health_profile and health_profile.diet_preference == 'halal' %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Halal</div>
                            <div class="checkbox-desc">Sesuai syariat Islam</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Kondisi Kesehatan -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#129658;</span>
                    <h2 class="section-title">Kondisi Kesehatan</h2>
                </div>
                <p class="section-description">Pilih kondisi kesehatan yang Anda miliki (jika ada). Sistem akan menyesuaikan rekomendasi resep.</p>
                
                <div class="checkbox-grid">
                    <label class="checkbox-item {% if 'diabetes' in current_conditions %}selected{% endif %}">
                        <input type="checkbox" name="health_conditions" value="diabetes" {% if 'diabetes' in current_conditions %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Diabetes</div>
                            <div class="checkbox-desc">Hindari gula tinggi</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'hipertensi' in current_conditions %}selected{% endif %}">
                        <input type="checkbox" name="health_conditions" value="hipertensi" {% if 'hipertensi' in current_conditions %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Hipertensi</div>
                            <div class="checkbox-desc">Hindari garam tinggi</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'kolesterol' in current_conditions %}selected{% endif %}">
                        <input type="checkbox" name="health_conditions" value="kolesterol" {% if 'kolesterol' in current_conditions %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Kolesterol Tinggi</div>
                            <div class="checkbox-desc">Hindari lemak jenuh</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'asam_urat' in current_conditions %}selected{% endif %}">
                        <input type="checkbox" name="health_conditions" value="asam_urat" {% if 'asam_urat' in current_conditions %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Asam Urat</div>
                            <div class="checkbox-desc">Hindari purin tinggi</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'maag' in current_conditions %}selected{% endif %}">
                        <input type="checkbox" name="health_conditions" value="maag" {% if 'maag' in current_conditions %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Maag / GERD</div>
                            <div class="checkbox-desc">Hindari pedas & asam</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Alergi -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#9888;</span>
                    <h2 class="section-title">Alergi & Intoleransi</h2>
                </div>
                <p class="section-description">Pilih bahan makanan yang menyebabkan alergi atau intoleransi pada Anda.</p>
                
                <div class="checkbox-grid">
                    <label class="checkbox-item {% if 'kacang' in current_allergies %}selected{% endif %}">
                        <input type="checkbox" name="allergies" value="kacang" {% if 'kacang' in current_allergies %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Kacang-kacangan</div>
                            <div class="checkbox-desc">Peanut, almond, dll</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'seafood' in current_allergies %}selected{% endif %}">
                        <input type="checkbox" name="allergies" value="seafood" {% if 'seafood' in current_allergies %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Seafood</div>
                            <div class="checkbox-desc">Udang, kepiting, dll</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'telur' in current_allergies %}selected{% endif %}">
                        <input type="checkbox" name="allergies" value="telur" {% if 'telur' in current_allergies %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Telur</div>
                            <div class="checkbox-desc">Telur ayam, bebek</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'susu' in current_allergies %}selected{% endif %}">
                        <input type="checkbox" name="allergies" value="susu" {% if 'susu' in current_allergies %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Susu & Dairy</div>
                            <div class="checkbox-desc">Laktosa intoleransi</div>
                        </div>
                    </label>
                    <label class="checkbox-item {% if 'gluten' in current_allergies %}selected{% endif %}">
                        <input type="checkbox" name="allergies" value="gluten" {% if 'gluten' in current_allergies %}checked{% endif %}>
                        <div>
                            <div class="checkbox-label">Gluten</div>
                            <div class="checkbox-desc">Gandum, terigu</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Preferensi Nutrisi -->
            <div class="form-section">
                <div class="section-header">
                    <span class="section-icon">&#127860;</span>
                    <h2 class="section-title">Preferensi Nutrisi</h2>
                </div>
                <p class="section-description">Aktifkan preferensi nutrisi yang ingin Anda terapkan dalam pola makan.</p>
                
                <div class="toggle-grid">
                    <div class="toggle-item {% if health_profile and health_profile.low_sugar %}active{% endif %}">
                        <span class="toggle-label">Rendah Gula</span>
                        <label class="toggle-switch">
                            <input type="checkbox" name="low_sugar" {% if health_profile and health_profile.low_sugar %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="toggle-item {% if health_profile and health_profile.low_salt %}active{% endif %}">
                        <span class="toggle-label">Rendah Garam</span>
                        <label class="toggle-switch">
                            <input type="checkbox" name="low_salt" {% if health_profile and health_profile.low_salt %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="toggle-item {% if health_profile and health_profile.low_fat %}active{% endif %}">
                        <span class="toggle-label">Rendah Lemak</span>
                        <label class="toggle-switch">
                            <input type="checkbox" name="low_fat" {% if health_profile and health_profile.low_fat %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="toggle-item {% if health_profile and health_profile.high_protein %}active{% endif %}">
                        <span class="toggle-label">Tinggi Protein</span>
                        <label class="toggle-switch">
                            <input type="checkbox" name="high_protein" {% if health_profile and health_profile.high_protein %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="toggle-item {% if health_profile and health_profile.high_fiber %}active{% endif %}">
                        <span class="toggle-label">Tinggi Serat</span>
                        <label class="toggle-switch">
                            <input type="checkbox" name="high_fiber" {% if health_profile and health_profile.high_fiber %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="btn-group">
                <a href="{{ url_for('home') }}" class="btn btn-secondary">Batal</a>
                <button type="submit" class="btn btn-primary">Simpan Profil Kesehatan</button>
            </div>
        </form>
    </div>

    <script>
        // Toggle selected class for radio items
        document.querySelectorAll('.radio-item input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const name = this.name;
                document.querySelectorAll(`.radio-item input[name="${name}"]`).forEach(r => {
                    r.closest('.radio-item').classList.remove('selected');
                });
                this.closest('.radio-item').classList.add('selected');
            });
        });

        // Toggle selected class for checkbox items
        document.querySelectorAll('.checkbox-item input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                this.closest('.checkbox-item').classList.toggle('selected', this.checked);
            });
        });

        // Toggle active class for toggle items
        document.querySelectorAll('.toggle-item input[type="checkbox"]').forEach(toggle => {
            toggle.addEventListener('change', function() {
                this.closest('.toggle-item').classList.toggle('active', this.checked);
            });
        });
    </script>
</body>
</html>
